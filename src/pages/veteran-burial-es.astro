---
import Layout from '../layouts/Layout.astro';
import siteDetails from '../config/siteDetails';
import ServiceNav from '../components/ServiceNav.astro';
import Accordion from '../components/Accordion.astro';

// Determine company name based on page type and language
const pathname = Astro.url.pathname;
const isSpanish = pathname.includes('-es') || pathname === '/es';
const isCatholic = pathname.includes('catholic');
const isVeteran = pathname.includes('veteran');

function getCompanyName(): string {
  if (isVeteran) {
    return isSpanish ? 'Cuidado de Veteranos' : 'Veteran Care';
  } else if (isCatholic) {
    return isSpanish ? 'Cuidado Católico' : 'Catholic Care';
  } else {
    return isSpanish ? 'Cuidado Asequible' : 'Affordable Care';
  }
}

const displayCompanyName = getCompanyName();
---

<Layout title="Servicios de Entierro para Veteranos - Planificar con Anticipación" pageType="veteran" language="es">
  <!-- Hero Section -->
  <section class="relative bg-gradient-to-br from-primary via-primary-dark to-primary-light text-white py-8 md:py-32 overflow-hidden">
    <!-- Background Image with Overlay -->
    <div class="absolute inset-0 z-0">
      <img 
        src="/images/hero.webp" 
        alt="Ambiente conmemorativo pacífico" 
        class="w-full h-full object-cover"
      />
      <!-- Dark overlay for text readability -->
      <div class="absolute inset-0 bg-gradient-to-br from-primary/40 via-primary-dark/40 to-primary-light/40"></div>
    </div>
    
    <!-- Content -->
    <div class="relative z-10 container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-6 md:gap-12 min-h-[300px] md:min-h-[500px] py-4 md:py-0">
        <!-- Company Name - Left/Top -->
        <div class="flex-1 w-full md:w-auto">
          <h1 class="text-3xl sm:text-4xl md:text-5xl lg:text-7xl font-heading font-bold drop-shadow-lg" style="line-height: 1.2; letter-spacing: -0.02em;">
            {displayCompanyName}
          </h1>
        </div>
        
        <!-- Hero Text - Center Right -->
        <div class="flex-1 w-full md:flex-none md:w-1/2 lg:w-2/5 text-left md:text-right mt-4 md:mt-0">
          <h2 class="text-xl sm:text-2xl md:text-4xl lg:text-5xl font-heading font-bold mb-3 md:mb-6 drop-shadow-lg" style="line-height: 1.2; letter-spacing: -0.02em;">
            Planificar con Anticipación para la Tranquilidad
          </h2>
          <p class="text-sm sm:text-base md:text-lg lg:text-xl text-white/95 leading-relaxed drop-shadow-md text-left md:text-right">
            Pensar en el final de la vida puede ser difícil. Sin embargo, hacer planes ahora es uno de los mejores regalos que puede darle a su familia.
          </p>
        </div>
      </div>
    </div>
    
    <!-- Attribution Footnote -->
    <div class="absolute bottom-0 right-0 z-10 px-4 sm:px-6 lg:px-8 pb-3 md:pb-4">
      <p class="text-xs sm:text-sm text-white/80 drop-shadow-md text-right">
        Proporcionado por Arbaugh-Pearce-Greenisen & Sons
      </p>
    </div>
  </section>

  <!-- Introductory Block -->
  <section class="py-8 md:py-12 bg-white">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto">
        <div class="bg-secondary p-6 md:p-8 rounded-lg shadow-sm border-t-4 border-accent">
          <p class="text-base md:text-lg text-text leading-relaxed text-center">
            Ofrecemos servicios completos de cremación y entierro. Ambas opciones están disponibles y son igualmente respetadas. Elija el servicio que se alinee con sus deseos, creencias y presupuesto. <strong>Muchas familias eligen igualmente entre entierro y cremación - ofrecemos servicios completos para ambas opciones.</strong>
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Service Navigation -->
  <ServiceNav />
    <!-- Burial Options Section -->
    <section class="py-10 md:py-24 bg-white">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="max-w-7xl mx-auto">
          <h2 class="text-2xl md:text-4xl font-heading font-bold text-primary mb-3 md:mb-4 text-center">
            Opciones de Entierro
          </h2>
          <p class="text-base md:text-lg text-text text-center mb-6 md:mb-8 max-w-3xl mx-auto italic">
            Honrando la dignidad atemporal de un lugar de descanso final con gracia y reverencia.
          </p>
          <p class="text-base md:text-xl text-text text-center mb-6 md:mb-12">
            Si prefiere el entierro en lugar de la cremación, también hay opciones asequibles para eso.
          </p>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-6">
            <div class="bg-secondary p-4 md:p-6 rounded-lg shadow-sm border-t-4 border-accent">
              <div class="flex items-center gap-2 mb-3">
                <svg class="w-6 h-6 text-accent flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                </svg>
                <h3 class="text-lg md:text-xl font-heading font-semibold text-primary">
                  Despedida Tradicional
                </h3>
              </div>
              <p class="text-[10px] md:text-xs font-semibold text-primary mb-2">
                El Tributo Clásico
              </p>
              <p class="text-xs md:text-sm text-text leading-relaxed">
                Este es un servicio completo para familias que desean seguir tradiciones consagradas por el tiempo. Incluye una visita para que los amigos se reúnan, un servicio funerario formal y una procesión al cementerio. Nos encargamos de cada detalle para asegurar una despedida respetuosa y completa.
              </p>
            </div>
            <div class="bg-secondary p-4 md:p-6 rounded-lg shadow-sm border-t-4 border-accent">
              <div class="flex items-center gap-2 mb-3">
                <svg class="w-6 h-6 text-accent flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <h3 class="text-lg md:text-xl font-heading font-semibold text-primary">
                  Despedida Simple
                </h3>
              </div>
              <p class="text-[10px] md:text-xs font-semibold text-primary mb-2">
                Un Recuerdo Enfocado
              </p>
              <p class="text-xs md:text-sm text-text leading-relaxed">
                Esta opción ofrece un hermoso servicio en un período de tiempo más corto. Incluye un tiempo para que la familia y los amigos compartan recuerdos seguido de una ceremonia significativa. Está diseñado para aquellos que desean un día profesional y digno enfocado en lo esencial de despedirse.
              </p>
            </div>
            <div class="bg-secondary p-4 md:p-6 rounded-lg shadow-sm border-t-4 border-accent">
              <div class="flex items-center gap-2 mb-3">
                <svg class="w-6 h-6 text-accent flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 002 2h2.945M15 11a3 3 0 11-6 0m6 0a3 3 0 10-6 0m6 0H9m3 0v1m0-1v-1m0 1H9m3 0h3M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <h3 class="text-lg md:text-xl font-heading font-semibold text-primary">
                  Servicio en el Cementerio
                </h3>
              </div>
              <p class="text-[10px] md:text-xs font-semibold text-primary mb-2">
                Un Tributo Silencioso al Aire Libre
              </p>
              <p class="text-xs md:text-sm text-text leading-relaxed">
                Este servicio tiene lugar completamente en el cementerio. Es una forma tranquila y elegante de honrar a su ser querido bajo el cielo abierto. Coordinamos todo en el lugar de descanso, permitiéndole enfocarse en un momento tranquilo de reflexión con aquellos más cercanos a usted.
              </p>
            </div>
            <div class="bg-secondary p-4 md:p-6 rounded-lg shadow-sm border-t-4 border-accent">
              <div class="flex items-center gap-2 mb-3">
                <svg class="w-6 h-6 text-accent flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <h3 class="text-lg md:text-xl font-heading font-semibold text-primary">
                  Entierro Inmediato
                </h3>
              </div>
              <p class="text-[10px] md:text-xs font-semibold text-primary mb-2">
                Un Camino Simple y Privado
              </p>
              <p class="text-xs md:text-sm text-text leading-relaxed">
                Esta es nuestra opción de entierro más directa. Es una opción modesta para familias que no desean tener una ceremonia pública. Proporcionamos cuidado profesional y transporte para asegurar que un entierro privado y digno tenga lugar de inmediato.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Veteran-Specific Content Section -->
    <section class="py-10 md:py-24 bg-secondary">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="max-w-4xl mx-auto">
          <h2 class="text-2xl md:text-4xl font-heading font-bold text-primary mb-6 md:mb-8 text-center">
            Servicios para Veteranos
          </h2>
          <div class="bg-white p-5 md:p-8 rounded-lg shadow-sm">
            <p class="text-sm md:text-base text-text leading-relaxed mb-6">
              Honramos a nuestros veteranos y sus familias con servicios especializados y asistencia de beneficios.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Common Questions About Veteran Services -->
    <section class="py-10 md:py-24 bg-white">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="max-w-4xl mx-auto">
          <h2 class="text-2xl md:text-4xl font-heading font-bold text-primary mb-6 md:mb-12 text-center">
            Preguntas Comunes Sobre los Servicios para Veteranos
          </h2>
          <div class="space-y-4 md:space-y-6">
            <div class="bg-secondary p-4 md:p-6 rounded-lg">
              <h3 class="text-lg md:text-xl font-heading font-semibold text-primary mb-2 md:mb-3">
                ¿Qué beneficios están disponibles para los veteranos?
              </h3>
              <p class="text-sm md:text-base text-text leading-relaxed">
                Los veteranos y sus familias pueden ser elegibles para varios beneficios, incluyendo asignaciones de entierro, lápidas y servicios de cementerio.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

  <!-- Planning & FAQ Section -->
  <section class="py-10 md:py-24 bg-secondary">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-2xl md:text-4xl font-heading font-bold text-primary mb-6 md:mb-8 text-center">
          Planificación y Preguntas Frecuentes
        </h2>
        <div class="grid md:grid-cols-3 gap-4 md:gap-8 mb-8 md:mb-12">
          <div class="bg-white p-4 md:p-6 rounded-lg shadow-sm border-t-4 border-accent">
            <h3 class="text-lg md:text-xl font-heading font-semibold text-primary mb-3 md:mb-4">
              Ayuda a Su Familia
            </h3>
            <p class="text-sm md:text-base text-text leading-relaxed">
              Proporciona claridad y tranquilidad para su familia al documentar sus preferencias con anticipación. Su familia no tendrá que adivinar lo que usted quería.
            </p>
          </div>
          <div class="bg-white p-4 md:p-6 rounded-lg shadow-sm border-t-4 border-accent">
            <h3 class="text-lg md:text-xl font-heading font-semibold text-primary mb-3 md:mb-4">
              Ahorra Dinero
            </h3>
            <p class="text-sm md:text-base text-text leading-relaxed">
              Opciones de prefinanciación para fijar las tarifas de hoy. Esto protege a su familia de los costos crecientes en el futuro. El dinero se mantiene seguro en una cuenta de fideicomiso especial o de seguro hasta que se necesite.
            </p>
          </div>
          <div class="bg-white p-4 md:p-6 rounded-lg shadow-sm border-t-4 border-accent">
            <h3 class="text-lg md:text-xl font-heading font-semibold text-primary mb-3 md:mb-4">
              Es Su Elección
            </h3>
            <p class="text-sm md:text-base text-text leading-relaxed">
              Usted decide exactamente cómo quiere ser recordado.
            </p>
          </div>
        </div>
        <div class="bg-white p-4 md:p-8 rounded-lg shadow-sm">
          <h3 class="text-xl md:text-2xl font-heading font-bold text-primary mb-6 text-center">
            Preguntas Comunes Sobre Planificar con Anticipación
          </h3>
          <Accordion 
            language="es"
            items={[
              {
                question: "¿Qué beneficios están disponibles para los veteranos?",
                answer: "Los veteranos y sus familias pueden ser elegibles para varios beneficios, incluyendo asignaciones de entierro, lápidas y servicios de cementerio."
              },
              {
                question: "¿Puedo pagar todo antes de morir?",
                answer: "Sí. Puede poner dinero en una cuenta segura (una póliza de seguro de vida, con la cual le ayudamos). Esto es algo muy cariñoso de hacer porque quita el estrés de su familia más tarde."
              },
              {
                question: "¿Qué pasa si muero mientras estoy viajando?",
                answer: "Si está lejos de casa cuando fallece, su familia solo necesita llamar a la funeraria. Ellos hablarán con las autoridades locales y lo traerán de vuelta a casa."
              },
              {
                question: "¿Hay mucho papeleo?",
                answer: "Puede haberlo, pero la funeraria ayudará. Guiarán a su familia a través de cada paso. Ayudan a notificar al Seguro Social y verificar cualquier beneficio de Veterano o dinero del seguro."
              }
            ]}
          />
        </div>
      </div>
    </div>
  </section>

  <!-- Cemetery/Headstone Help Section -->
  <section class="py-10 md:py-24 bg-secondary">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto">
        <div class="bg-white p-5 md:p-12 rounded-lg shadow-sm border-t-4 border-accent">
          <h2 class="text-xl md:text-3xl font-heading font-bold text-primary mb-4 md:mb-6">
            Si no tenemos una parcela de cementerio o una lápida, ¿puede ayudarnos a elegir una?
          </h2>
          <p class="text-sm md:text-lg text-text leading-relaxed">
            Sí, absolutamente. Estamos aquí para guiarlo a través de estas decisiones. Mantenemos un directorio completo de cementerios locales y sus precios para ayudarlo a encontrar un lugar de descanso pacífico que sea adecuado para su familia. También podemos conectarlo con expertos locales de confianza para ayudarlo a diseñar una hermosa lápida o marcador. No tiene que tomar estas decisiones solo; nos aseguraremos de que tenga todas las opciones que necesita.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Ongoing Care Section -->
  <section class="py-10 md:py-16 bg-white">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto">
        <p class="text-base md:text-lg lg:text-xl text-text leading-relaxed text-center">
          Nuestro cuidado no termina cuando concluye el servicio. Estamos aquí para ayudar con las practicidades de la pérdida—desde recursos de duelo hasta asistencia con documentación—asegurando que nunca tenga que navegar el camino hacia adelante solo.
        </p>
      </div>
    </div>
  </section>

  <!-- Contact & Support Section -->
  <section id="contact" class="py-10 md:py-24 bg-white">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-2xl mx-auto">
        <h2 class="text-2xl md:text-4xl font-heading font-bold text-primary mb-3 md:mb-4 text-center">
          Contacto y Apoyo
        </h2>
        <p class="text-base md:text-xl text-text text-center mb-6 md:mb-8">
          Nuestro equipo compasivo está aquí para guiarlo a través de cada paso.
        </p>
        
        <!-- Phone Number Badge -->
        <div class="bg-primary text-white p-4 md:p-6 rounded-lg shadow-sm mb-6 md:mb-8 text-center">
          <p class="text-sm md:text-base text-white/90 mb-2">Disponible 24/7</p>
          <a
            href={`tel:${siteDetails.phone.replace(/\D/g, '')}`}
            class="text-2xl md:text-3xl font-bold text-white hover:text-accent transition-colors inline-block"
          >
            {siteDetails.phone}
          </a>
        </div>
        
        <div class="bg-secondary p-5 md:p-12 rounded-lg shadow-sm">
          <form id="contact-form" class="space-y-4 md:space-y-6">
            <!-- Honeypot field for spam prevention -->
            <input type="text" name="honeypot" style="display: none;" tabindex="-1" autocomplete="off" />
            
            <div>
              <label for="name" class="block text-sm font-semibold text-primary mb-2">
                Nombre Completo *
              </label>
              <input
                type="text"
                id="name"
                name="name"
                autocomplete="name"
                required
                class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-accent focus:border-transparent"
                placeholder="Su nombre"
              />
            </div>
            
            <div>
              <label for="email" class="block text-sm font-semibold text-primary mb-2">
                Dirección de Correo Electrónico *
              </label>
              <input
                type="email"
                id="email"
                name="email"
                autocomplete="email"
                required
                class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-accent focus:border-transparent"
                placeholder="su@correo.com"
              />
            </div>
            
            <div>
              <label for="phone" class="block text-sm font-semibold text-primary mb-2">
                Número de Teléfono
              </label>
              <input
                type="tel"
                id="phone"
                name="phone"
                autocomplete="tel"
                class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-accent focus:border-transparent"
                placeholder="(330) 332-4401"
              />
            </div>
            
            <div>
              <label for="message" class="block text-sm font-semibold text-primary mb-2">
                Mensaje *
              </label>
              <textarea
                id="message"
                name="message"
                autocomplete="off"
                required
                rows="5"
                class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-accent focus:border-transparent"
                placeholder="Cuéntenos cómo podemos ayudarlo a planificar con anticipación..."
              ></textarea>
            </div>
            
            <button
              type="submit"
              class="w-full bg-accent text-white px-6 py-3 rounded-md font-semibold text-lg hover:bg-accent-dark transition shadow-sm"
            >
              Enviar Mensaje
            </button>
            
            <div id="form-message" class="hidden mt-4 p-4 rounded-md"></div>
          </form>
        </div>
      </div>
    </div>
  </section>

  <script>
    // Contact form handling
    const form = document.getElementById('contact-form');
    const messageDiv = document.getElementById('form-message');

    form?.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const formData = {
        name: (document.getElementById('name') as HTMLInputElement).value,
        email: (document.getElementById('email') as HTMLInputElement).value,
        phone: (document.getElementById('phone') as HTMLInputElement).value,
        message: (document.getElementById('message') as HTMLTextAreaElement).value,
        honeypot: (document.querySelector('input[name="honeypot"]') as HTMLInputElement).value,
      };

      // Show loading state
      const submitButton = form.querySelector('button[type="submit"]') as HTMLButtonElement;
      const originalText = submitButton.textContent;
      submitButton.textContent = 'Enviando...';
      submitButton.disabled = true;
      messageDiv.classList.add('hidden');

      try {
        const response = await fetch('/api/contact', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(formData),
        });

        const data = await response.json();

        if (response.ok) {
          messageDiv.className = 'mt-4 p-4 rounded-md bg-green-100 text-green-800';
          messageDiv.textContent = data.message || 'Gracias por su mensaje. Nos pondremos en contacto con usted pronto.';
          form.reset();
        } else {
          messageDiv.className = 'mt-4 p-4 rounded-md bg-red-100 text-red-800';
          messageDiv.textContent = data.error || 'Ocurrió un error. Por favor, intente nuevamente.';
        }
      } catch (error) {
        messageDiv.className = 'mt-4 p-4 rounded-md bg-red-100 text-red-800';
        messageDiv.textContent = 'Ocurrió un error. Por favor, intente nuevamente o llámenos directamente.';
      } finally {
        messageDiv.classList.remove('hidden');
        submitButton.textContent = originalText;
        submitButton.disabled = false;
      }
    });
  </script>
</Layout>
