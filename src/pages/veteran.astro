---
import Layout from '../layouts/Layout.astro';
import siteDetails from '../config/siteDetails';
import ServiceButtons from '../components/ServiceButtons.astro';
import Accordion from '../components/Accordion.astro';

// Determine company name based on page type and language
const pathname = Astro.url.pathname;
const isSpanish = pathname.includes('-es') || pathname === '/es';
const isCatholic = pathname.includes('catholic');
const isVeteran = pathname.includes('veteran');

function getCompanyName(): string {
  if (isVeteran) {
    return isSpanish ? 'Cuidado de Veteranos' : 'Veteran Care';
  } else if (isCatholic) {
    return isSpanish ? 'Cuidado Católico' : 'Catholic Care';
  } else {
    return isSpanish ? 'Cuidado Asequible' : 'Affordable Care';
  }
}

const displayCompanyName = getCompanyName();
---

<Layout title="Veteran Services - Planning Ahead" pageType="veteran" language="en">
  <!-- Hero Section -->
  <section class="relative bg-gradient-to-br from-primary via-primary-dark to-primary-light text-white py-12 md:py-32 overflow-hidden">
    <!-- Background Image with Overlay -->
    <div class="absolute inset-0 z-0">
      <img 
        src="/images/hero.webp" 
        alt="Peaceful memorial setting" 
        class="w-full h-full object-cover"
      />
      <!-- Dark overlay for text readability -->
      <div class="absolute inset-0 bg-gradient-to-br from-primary/40 via-primary-dark/40 to-primary-light/40"></div>
    </div>
    
    <!-- Content -->
    <div class="relative z-10 container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-8 md:gap-12 min-h-[400px] md:min-h-[500px]">
        <!-- Company Name - Left/Top -->
        <div class="flex-1">
          <h1 class="text-4xl md:text-5xl lg:text-7xl font-heading font-bold drop-shadow-lg" style="line-height: 1.2; letter-spacing: -0.02em;">
            {displayCompanyName}
          </h1>
        </div>
        
        <!-- Hero Text - Center Right -->
        <div class="flex-1 md:flex-none md:w-1/2 lg:w-2/5 text-right md:text-right">
          <h2 class="text-2xl md:text-4xl lg:text-5xl font-heading font-bold mb-4 md:mb-6 drop-shadow-lg" style="line-height: 1.2; letter-spacing: -0.02em;">
            Planning Ahead for Peace of Mind
          </h2>
          <p class="text-base md:text-lg lg:text-xl text-white/95 leading-relaxed drop-shadow-md text-justify md:text-right">
            Thinking about the end of life can be hard. However, making plans now is one of the best gifts you can give to your family. Providing clarity and peace of mind for your family by documenting your preferences in advance. It also helps them avoid difficult choices during a sad time.
          </p>
        </div>
      </div>
    </div>
  </section>

  <ServiceButtons />


  <!-- Veteran-Specific Content Section -->
  <section class="py-10 md:py-24 bg-white">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-2xl md:text-4xl font-heading font-bold text-primary mb-6 md:mb-8 text-center">
          Veteran Services
        </h2>
        <div class="bg-secondary p-5 md:p-8 rounded-lg shadow-sm">
          <p class="text-sm md:text-base text-text leading-relaxed mb-6">
            <!-- Content will be provided -->
            We honor our veterans and their families with specialized services and benefits assistance.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Planning & FAQ Section -->
  <section class="py-10 md:py-24 bg-secondary">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-2xl md:text-4xl font-heading font-bold text-primary mb-6 md:mb-8 text-center">
          Planning & FAQ
        </h2>
        <div class="grid md:grid-cols-3 gap-4 md:gap-8 mb-8 md:mb-12">
          <div class="bg-white p-4 md:p-6 rounded-lg shadow-sm border-t-4 border-accent">
            <h3 class="text-lg md:text-xl font-heading font-semibold text-primary mb-3 md:mb-4">
              It Helps Your Family
            </h3>
            <p class="text-sm md:text-base text-text leading-relaxed">
              Providing clarity and peace of mind for your family by documenting your preferences in advance. Your family won't have to guess what you wanted.
            </p>
          </div>
          <div class="bg-white p-4 md:p-6 rounded-lg shadow-sm border-t-4 border-accent">
            <h3 class="text-lg md:text-xl font-heading font-semibold text-primary mb-3 md:mb-4">
              It Saves Money
            </h3>
            <p class="text-sm md:text-base text-text leading-relaxed">
              Pre-funding options to lock in today's rates. This protects your family from rising costs in the future. The money is kept safe in a special trust or insurance account until it is needed.
            </p>
          </div>
          <div class="bg-white p-4 md:p-6 rounded-lg shadow-sm border-t-4 border-accent">
            <h3 class="text-lg md:text-xl font-heading font-semibold text-primary mb-3 md:mb-4">
              It is Your Choice
            </h3>
            <p class="text-sm md:text-base text-text leading-relaxed">
              You get to decide exactly how you want to be remembered.
            </p>
          </div>
        </div>
        <div class="bg-white p-4 md:p-8 rounded-lg shadow-sm">
          <h3 class="text-xl md:text-2xl font-heading font-bold text-primary mb-6 text-center">
            Common Questions About Planning Ahead
          </h3>
          <Accordion 
            language="en"
            items={[
              {
                question: "What benefits are available for veterans?",
                answer: "Veterans and their families may be eligible for various benefits including burial allowances, headstones, and cemetery services."
              },
              {
                question: "Can I pay for everything before I die?",
                answer: "Yes. You can put money into a safe account (a Life Insurance policy, which we help with). This is a very caring thing to do because it takes the stress off your family later."
              },
              {
                question: "What if I die while I am traveling?",
                answer: "If you are away from home when you pass away, your family just needs to call the funeral home. They will talk to the local authorities and bring you back home."
              },
              {
                question: "Is there a lot of paperwork?",
                answer: "There can be, but the funeral home will help. They will guide your family through every step. They help notify Social Security and check for any Veteran benefits or insurance money."
              }
            ]}
          />
        </div>
      </div>
    </div>
  </section>

  <!-- Cremation Options Section -->
  <section class="py-10 md:py-24 bg-white">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-6xl mx-auto">
        <h2 class="text-2xl md:text-4xl font-heading font-bold text-primary mb-3 md:mb-4 text-center">
          Cremation Options
        </h2>
        <p class="text-base md:text-xl text-text text-center mb-6 md:mb-12 max-w-3xl mx-auto">
          There are different ways to handle cremation. You can choose the one that fits your life and your budget.
        </p>
        <div class="grid md:grid-cols-3 gap-4 md:gap-8">
          <!-- Option 1: Direct Cremation -->
          <div class="bg-secondary p-4 md:p-8 rounded-lg shadow-sm border-t-4 border-accent">
            <div class="flex items-center gap-3 mb-3 md:mb-4">
              <svg class="w-8 h-8 md:w-10 md:h-10 text-accent flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              <h3 class="text-lg md:text-2xl font-heading font-bold text-primary">
                1. The Simple Option<br />
                <span class="text-base md:text-lg font-normal">(Direct Cremation)</span>
              </h3>
            </div>
            <p class="text-sm md:text-base text-text mb-4 md:mb-6 leading-relaxed">
              This is the most basic choice. It is for people who want something simple and private.
            </p>
            <ul class="space-y-2 md:space-y-3 text-sm md:text-base text-text">
              <li class="flex items-start">
                <span class="text-accent mr-2">•</span>
                <span>Professional transportation and care of the deceased.</span>
              </li>
              <li class="flex items-start">
                <span class="text-accent mr-2">•</span>
                <span>The cremation takes place.</span>
              </li>
              <li class="flex items-start">
                <span class="text-accent mr-2">•</span>
                <span>There is no public funeral or visitation.</span>
              </li>
              <li class="flex items-start">
                <span class="text-accent mr-2">•</span>
                <span>The family receives the ashes to bury, scatter, or keep at home.</span>
              </li>
            </ul>
          </div>

          <!-- Option 2: Memorial Option -->
          <div class="bg-secondary p-4 md:p-8 rounded-lg shadow-sm border-t-4 border-accent">
            <div class="flex items-center gap-3 mb-3 md:mb-4">
              <svg class="w-8 h-8 md:w-10 md:h-10 text-accent flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
              </svg>
              <h3 class="text-lg md:text-2xl font-heading font-bold text-primary">
                2. The Memorial Option<br />
                <span class="text-base md:text-lg font-normal">(Journey of Remembrance)</span>
              </h3>
            </div>
            <p class="text-sm md:text-base text-text mb-4 md:mb-6 leading-relaxed">
              This option allows friends and family to say goodbye together.
            </p>
            <ul class="space-y-2 md:space-y-3 text-sm md:text-base text-text">
              <li class="flex items-start">
                <span class="text-accent mr-2">•</span>
                <span>Includes a time for family and friends to visit.</span>
              </li>
              <li class="flex items-start">
                <span class="text-accent mr-2">•</span>
                <span>Includes a memorial service to share memories.</span>
              </li>
              <li class="flex items-start">
                <span class="text-accent mr-2">•</span>
                <span>The cremation happens, and the ashes are returned to the family.</span>
              </li>
            </ul>
          </div>

          <!-- Option 3: Full Service Option -->
          <div class="bg-secondary p-4 md:p-8 rounded-lg shadow-sm border-t-4 border-accent">
            <div class="flex items-center gap-3 mb-3 md:mb-4">
              <svg class="w-8 h-8 md:w-10 md:h-10 text-accent flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
              </svg>
              <h3 class="text-lg md:text-2xl font-heading font-bold text-primary">
                3. The Full Service Option<br />
                <span class="text-base md:text-lg font-normal">(Journey of Life)</span>
              </h3>
            </div>
            <p class="text-sm md:text-base text-text mb-4 md:mb-6 leading-relaxed">
              This is like a traditional funeral, but it ends with cremation instead of burial.
            </p>
            <ul class="space-y-2 md:space-y-3 text-sm md:text-base text-text">
              <li class="flex items-start">
                <span class="text-accent mr-2">•</span>
                <span>Your body is prepared so family and friends can visit and say goodbye.</span>
              </li>
              <li class="flex items-start">
                <span class="text-accent mr-2">•</span>
                <span>A special "rental casket" is used for the service.</span>
              </li>
              <li class="flex items-start">
                <span class="text-accent mr-2">•</span>
                <span>After the funeral service is over, the cremation takes place.</span>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Burial Options Section -->
  <section class="py-10 md:py-24 bg-secondary">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-2xl md:text-4xl font-heading font-bold text-primary mb-3 md:mb-4 text-center">
          Burial Options
        </h2>
        <p class="text-base md:text-xl text-text text-center mb-6 md:mb-12">
          If you prefer burial instead of cremation, there are affordable choices for that, too.
        </p>
        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6">
          <div class="bg-white p-4 md:p-6 rounded-lg shadow-sm border-t-4 border-accent">
            <div class="flex items-center gap-2 mb-3">
              <svg class="w-6 h-6 text-accent flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
              </svg>
              <h3 class="text-lg md:text-xl font-heading font-semibold text-primary">
                Traditional Farewell
              </h3>
            </div>
            <p class="text-sm md:text-base text-text">
              Includes getting the body ready, a visitation, a funeral service, and a ride to the cemetery.
            </p>
          </div>
          <div class="bg-white p-4 md:p-6 rounded-lg shadow-sm border-t-4 border-accent">
            <div class="flex items-center gap-2 mb-3">
              <svg class="w-6 h-6 text-accent flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              <h3 class="text-lg md:text-xl font-heading font-semibold text-primary">
                Simple Farewell
              </h3>
            </div>
            <p class="text-sm md:text-base text-text">
              Similar to the traditional one, but with a shorter visitation time.
            </p>
          </div>
          <div class="bg-white p-4 md:p-6 rounded-lg shadow-sm border-t-4 border-accent">
            <div class="flex items-center gap-2 mb-3">
              <svg class="w-6 h-6 text-accent flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 002 2h2.945M15 11a3 3 0 11-6 0m6 0a3 3 0 10-6 0m6 0H9m3 0v1m0-1v-1m0 1H9m3 0h3M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              <h3 class="text-lg md:text-xl font-heading font-semibold text-primary">
                Graveside Service
              </h3>
            </div>
            <p class="text-sm md:text-base text-text">
              A service held right at the cemetery.
            </p>
          </div>
          <div class="bg-white p-4 md:p-6 rounded-lg shadow-sm border-t-4 border-accent">
            <div class="flex items-center gap-2 mb-3">
              <svg class="w-6 h-6 text-accent flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              <h3 class="text-lg md:text-xl font-heading font-semibold text-primary">
                Immediate Burial
              </h3>
            </div>
            <p class="text-sm md:text-base text-text">
              Burial with no public service or visitation.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact & Support Section -->
  <section id="contact" class="py-10 md:py-24 bg-white">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-2xl mx-auto">
        <h2 class="text-2xl md:text-4xl font-heading font-bold text-primary mb-3 md:mb-4 text-center">
          Contact & Support
        </h2>
        <p class="text-base md:text-xl text-text text-center mb-6 md:mb-8">
          Our compassionate team is here to guide you through every step.
        </p>
        
        <!-- Phone Number Badge -->
        <div class="bg-primary text-white p-4 md:p-6 rounded-lg shadow-sm mb-6 md:mb-8 text-center">
          <p class="text-sm md:text-base text-white/90 mb-2">Available 24/7</p>
          <a
            href={`tel:${siteDetails.phone.replace(/\D/g, '')}`}
            class="text-2xl md:text-3xl font-bold text-white hover:text-accent transition-colors inline-block"
          >
            {siteDetails.phone}
          </a>
        </div>
        
        <div class="bg-secondary p-5 md:p-12 rounded-lg shadow-sm">
          <form id="contact-form" class="space-y-4 md:space-y-6">
            <!-- Honeypot field for spam prevention -->
            <input type="text" name="honeypot" style="display: none;" tabindex="-1" autocomplete="off" />
            
            <div>
              <label for="name" class="block text-sm font-semibold text-primary mb-2">
                Full Name *
              </label>
              <input
                type="text"
                id="name"
                name="name"
                autocomplete="name"
                required
                class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-accent focus:border-transparent"
                placeholder="Your name"
              />
            </div>
            
            <div>
              <label for="email" class="block text-sm font-semibold text-primary mb-2">
                Email Address *
              </label>
              <input
                type="email"
                id="email"
                name="email"
                autocomplete="email"
                required
                class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-accent focus:border-transparent"
                placeholder="your@email.com"
              />
            </div>
            
            <div>
              <label for="phone" class="block text-sm font-semibold text-primary mb-2">
                Phone Number
              </label>
              <input
                type="tel"
                id="phone"
                name="phone"
                autocomplete="tel"
                class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-accent focus:border-transparent"
                placeholder="(330) 332-4401"
              />
            </div>
            
            <div>
              <label for="message" class="block text-sm font-semibold text-primary mb-2">
                Message *
              </label>
              <textarea
                id="message"
                name="message"
                autocomplete="off"
                required
                rows="5"
                class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-accent focus:border-transparent"
                placeholder="Tell us how we can help you plan ahead..."
              ></textarea>
            </div>
            
            <button
              type="submit"
              class="w-full bg-accent text-white px-6 py-3 rounded-md font-semibold text-lg hover:bg-accent-dark transition shadow-sm"
            >
              Send Message
            </button>
            
            <div id="form-message" class="hidden mt-4 p-4 rounded-md"></div>
          </form>
        </div>
      </div>
    </div>
  </section>

  <script>
    // Contact form handling
    const form = document.getElementById('contact-form');
    const messageDiv = document.getElementById('form-message');

    form?.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const formData = {
        name: (document.getElementById('name') as HTMLInputElement).value,
        email: (document.getElementById('email') as HTMLInputElement).value,
        phone: (document.getElementById('phone') as HTMLInputElement).value,
        message: (document.getElementById('message') as HTMLTextAreaElement).value,
        honeypot: (document.querySelector('input[name="honeypot"]') as HTMLInputElement).value,
      };

      // Show loading state
      const submitButton = form.querySelector('button[type="submit"]') as HTMLButtonElement;
      const originalText = submitButton.textContent;
      submitButton.textContent = 'Sending...';
      submitButton.disabled = true;
      messageDiv.classList.add('hidden');

      try {
        const response = await fetch('/api/contact', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(formData),
        });

        const data = await response.json();

        if (response.ok) {
          messageDiv.className = 'mt-4 p-4 rounded-md bg-green-100 text-green-800';
          messageDiv.textContent = data.message || 'Thank you for your message. We will get back to you soon.';
          form.reset();
        } else {
          messageDiv.className = 'mt-4 p-4 rounded-md bg-red-100 text-red-800';
          messageDiv.textContent = data.error || 'An error occurred. Please try again.';
        }
      } catch (error) {
        messageDiv.className = 'mt-4 p-4 rounded-md bg-red-100 text-red-800';
        messageDiv.textContent = 'An error occurred. Please try again or call us directly.';
      } finally {
        messageDiv.classList.remove('hidden');
        submitButton.textContent = originalText;
        submitButton.disabled = false;
      }
    });
  </script>
</Layout>
