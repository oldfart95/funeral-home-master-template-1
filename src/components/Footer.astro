---
import siteDetails from '@/config/siteDetails';
import { formatPhoneDisplay, formatPhoneTel } from '@/utils/phone';

interface Props {
  pageType?: 'general' | 'catholic' | 'veteran';
  language?: 'en' | 'es';
}

const { pageType = 'general', language = 'en' } = Astro.props;

// Generate cremation link based on pageType and language
function getCremationLink(): string {
  const base = pageType === 'catholic' 
    ? '/catholic-cremation'
    : pageType === 'veteran'
    ? '/veteran-cremation'
    : '/cremation';
  
  return language === 'es' ? `${base}-es` : base;
}

// Generate burial link based on pageType and language
function getBurialLink(): string {
  const base = pageType === 'catholic'
    ? '/catholic-burial'
    : pageType === 'veteran'
    ? '/veteran-burial'
    : '/burial';
  
  return language === 'es' ? `${base}-es` : base;
}

const cremationLink = getCremationLink();
const burialLink = getBurialLink();

// Get phone number (use placeholder if not set)
const phone = siteDetails.phone && siteDetails.phone !== '(111) 111-1111' 
  ? siteDetails.phone 
  : '(111) 111-1111';

// Check if address is available
const hasAddress = siteDetails.address.street && siteDetails.address.city;
---

<footer class="bg-primary text-white py-12 md:py-16 mt-auto">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 md:gap-6 lg:gap-8 mb-8">
      <!-- Quick Links -->
      <div>
        <h3 class="text-xl font-heading font-bold mb-4 text-white">
          {language === 'es' ? 'Enlaces Rápidos' : 'Quick Links'}
        </h3>
        <ul class="space-y-2">
          <li>
            <a href={cremationLink} class="footer-link text-white/80 hover:text-accent transition-all duration-200 flex items-center gap-2 group">
              <svg class="w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
              <span>{language === 'es' ? 'Cremación' : 'Cremation'}</span>
            </a>
          </li>
          <li>
            <a href={burialLink} class="footer-link text-white/80 hover:text-accent transition-all duration-200 flex items-center gap-2 group">
              <svg class="w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
              <span>{language === 'es' ? 'Entierro' : 'Burial'}</span>
            </a>
          </li>
          <li>
            <a href="#contact" class="footer-link text-white/80 hover:text-accent transition-all duration-200 flex items-center gap-2 group">
              <svg class="w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
              <span>{language === 'es' ? 'Contáctenos' : 'Contact Us'}</span>
            </a>
          </li>
        </ul>
      </div>

      <!-- Services -->
      <div>
        <h3 class="text-xl font-heading font-bold mb-4 text-white">
          {language === 'es' ? 'Servicios' : 'Services'}
        </h3>
        <ul class="space-y-2">
          <li>
            <a href="/pre-planning" class="footer-link text-white/80 hover:text-accent transition-all duration-200 flex items-center gap-2 group">
              <svg class="w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
              <span>{language === 'es' ? 'Planificación Previa' : 'Pre-Planning'}</span>
            </a>
          </li>
          <li>
            <a href="/immediate-need" class="footer-link text-white/80 hover:text-accent transition-all duration-200 flex items-center gap-2 group">
              <svg class="w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
              <span>{language === 'es' ? 'Necesidad Inmediata' : 'Immediate Need'}</span>
            </a>
          </li>
          <li>
            <a href="/traditional-services" class="footer-link text-white/80 hover:text-accent transition-all duration-200 flex items-center gap-2 group">
              <svg class="w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
              <span>{language === 'es' ? 'Servicios Tradicionales' : 'Traditional Services'}</span>
            </a>
          </li>
        </ul>
      </div>

      <!-- Company -->
      <div>
        <h3 class="text-xl font-heading font-bold mb-4 text-white">
          {language === 'es' ? 'Empresa' : 'Company'}
        </h3>
        <ul class="space-y-2">
          <li>
            <a href="/privacy-policy" class="footer-link text-white/80 hover:text-accent transition-all duration-200 flex items-center gap-2 group">
              <svg class="w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
              <span>{language === 'es' ? 'Política de Privacidad' : 'Privacy Policy'}</span>
            </a>
          </li>
          <li>
            <a href="/accessibility" class="footer-link text-white/80 hover:text-accent transition-all duration-200 flex items-center gap-2 group">
              <svg class="w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
              <span>{language === 'es' ? 'Declaración de Accesibilidad' : 'Accessibility Statement'}</span>
            </a>
          </li>
        </ul>
      </div>

      <!-- Contact -->
      <div>
        <h3 class="text-xl font-heading font-bold mb-4 text-white">
          {language === 'es' ? 'Contacto' : 'Contact'}
        </h3>
        <ul class="space-y-2">
          {hasAddress && (
            <li class="text-white/80">
              <address class="not-italic">
                {siteDetails.address.street}<br />
                {siteDetails.address.city}, {siteDetails.address.state} {siteDetails.address.zip}
              </address>
            </li>
          )}
          <li>
            <a 
              href={`tel:${formatPhoneTel(phone)}`}
              class="footer-link text-white/80 hover:text-accent transition-all duration-200 flex items-center gap-2 group"
            >
              <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
              </svg>
              <span>{formatPhoneDisplay(phone)}</span>
            </a>
          </li>
        </ul>
      </div>
    </div>
    
    <div class="border-t border-white/20 pt-8 text-center text-white/70 text-sm">
      <p>&copy; {new Date().getFullYear()} {siteDetails.companyName}. All rights reserved.</p>
    </div>
  </div>
</footer>

