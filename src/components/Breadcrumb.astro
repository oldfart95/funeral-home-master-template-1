---
interface BreadcrumbItem {
  label: string;
  href: string;
}

interface Props {
  items: BreadcrumbItem[];
}

const { items } = Astro.props;

// Don't show breadcrumb if only one item (just "Home")
if (items.length <= 1) {
  return null;
}
---

<nav aria-label="Breadcrumb" class="breadcrumb-container">
  <ol class="breadcrumb-list" itemscope itemtype="https://schema.org/BreadcrumbList">
    {items.map((item, index) => {
      const isLast = index === items.length - 1;
      return (
        <li 
          class="breadcrumb-item"
          itemprop="itemListElement" 
          itemscope 
          itemtype="https://schema.org/ListItem"
        >
          {isLast ? (
            <span class="breadcrumb-current" itemprop="name">{item.label}</span>
          ) : (
            <a 
              href={item.href} 
              class="breadcrumb-link"
              itemprop="item"
            >
              <span itemprop="name">{item.label}</span>
            </a>
          )}
          <meta itemprop="position" content={String(index + 1)} />
          {!isLast && (
            <span class="breadcrumb-separator" aria-hidden="true">
              <svg class="breadcrumb-chevron" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
              </svg>
            </span>
          )}
        </li>
      );
    })}
  </ol>
</nav>

<style>
  .breadcrumb-container {
    @apply py-3 px-4 sm:px-6 lg:px-8;
    background-color: var(--color-secondary);
    border-bottom: 1px solid var(--color-secondary-dark);
  }

  .breadcrumb-list {
    @apply flex flex-wrap items-center gap-2;
    list-style: none;
    margin: 0;
    padding: 0;
    max-width: 1280px;
    margin-left: auto;
    margin-right: auto;
  }

  .breadcrumb-item {
    @apply flex items-center;
    display: flex;
    align-items: center;
  }

  .breadcrumb-link {
    @apply text-primary hover:text-accent transition-all duration-200;
    text-decoration: none;
    font-size: 0.875rem;
    font-weight: 500;
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
  }

  .breadcrumb-link:hover {
    text-decoration: underline;
    transform: translateX(2px);
  }

  .breadcrumb-current {
    @apply text-text;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--color-text);
  }

  .breadcrumb-separator {
    @apply text-text opacity-40;
    margin: 0 0.5rem;
    display: flex;
    align-items: center;
  }

  .breadcrumb-chevron {
    width: 1rem;
    height: 1rem;
    color: currentColor;
  }

  /* Responsive: Hide breadcrumb on very small screens */
  @media (max-width: 640px) {
    .breadcrumb-container {
      @apply py-2 px-4;
    }

    .breadcrumb-link,
    .breadcrumb-current {
      font-size: 0.8125rem;
    }
  }
</style>
