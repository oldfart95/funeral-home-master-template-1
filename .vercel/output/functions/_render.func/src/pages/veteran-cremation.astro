---
import Layout from '@/layouts/Layout.astro';
import siteDetails from '@/config/siteDetails';
import ServiceNav from '@/components/ServiceNav.astro';
import Accordion from '@/components/Accordion.astro';
import OngoingCare from '@/components/OngoingCare.astro';
import ContactForm from '@/components/ContactForm.astro';
import { getFAQs } from '@/utils/faqs';

// Determine company name based on page type and language
const pathname = Astro.url.pathname;
const isSpanish = pathname.includes('-es') || pathname === '/es';
const isCatholic = pathname.includes('catholic');
const isVeteran = pathname.includes('veteran');

function getCompanyName(): string {
  if (isVeteran) {
    return isSpanish ? 'Cuidado de Veteranos' : 'Veteran Care';
  } else if (isCatholic) {
    return isSpanish ? 'Cuidado Católico' : 'Catholic Care';
  } else {
    return isSpanish ? 'Cuidado Asequible' : 'Affordable Care';
  }
}

function getLogoPath(): string {
  if (isVeteran) {
    return '/images/VeteranLogo.webp';
  } else if (isCatholic) {
    return isSpanish ? '/images/SpanishCathLogo.webp' : '/images/CatholicLogo.webp';
  } else {
    return isSpanish ? '/images/SpanishAffLogo.webp' : '/images/AffCareLogo.webp';
  }
}

const displayCompanyName = getCompanyName();
const logoPath = getLogoPath();

// Generate service-specific structured data
function generateServiceSchema() {
  const baseUrl = Astro.site?.href || Astro.url.origin;
  const phone = siteDetails.phone && siteDetails.phone !== '(111) 111-1111' 
    ? siteDetails.phone 
    : '(111) 111-1111';
  
  const schema = {
    '@context': 'https://schema.org',
    '@type': 'Service',
    name: 'Veteran Cremation Services',
    description: 'Veteran cremation services that recognize and honor military service. We help you access veteran benefits and ensure your service is remembered with dignity.',
    provider: {
      '@type': 'FuneralHome',
      name: siteDetails.companyName,
      telephone: phone,
      url: baseUrl
    },
    serviceType: 'Funeral Service',
    areaServed: {
      '@type': 'Country',
      name: 'United States'
    },
    offers: {
      '@type': 'Offer',
      priceRange: '$$',
      description: 'Veteran cremation services with full military honors and benefits'
    }
  };
  
  return JSON.stringify(schema);
}

const serviceSchema = generateServiceSchema();
---

<Layout 
  title="Veteran Cremation Services - Planning Ahead" 
  description="Veteran cremation services that recognize and honor military service. We help you access veteran benefits and ensure your service is remembered with dignity."
  pageType="veteran" 
  language="en"
>
  <!-- Service-specific Structured Data -->
  <script type="application/ld+json" set:html={serviceSchema} />
  <!-- Hero Section -->
  <section class="relative bg-gradient-to-br from-primary via-primary-dark to-primary-light text-white py-8 md:py-32 overflow-hidden">
    <!-- Background Image with Overlay -->
    <div class="absolute inset-0 z-0">
      <img 
        src="/images/hero.webp"
        srcset="/images/hero-640.webp 640w,
                /images/hero.webp 970w"
        sizes="(max-width: 640px) 640px,
               970px"
        loading="eager"
        fetchpriority="high"
        alt="Veteran cremation services" 
        class="w-full h-full object-cover blur-sm"
      />
      <!-- Dark overlay for text readability -->
      <div class="absolute inset-0 bg-gradient-to-br from-primary/40 via-primary-dark/40 to-primary-light/40"></div>
    </div>
    
    <!-- Content -->
    <div class="relative z-10 container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-6 md:gap-12 min-h-[300px] md:min-h-[500px] py-4 md:py-0">
        <!-- Company Name - Left/Top -->
        <div class="flex-1 w-full md:w-auto">
          <img 
            src={logoPath}
            alt={displayCompanyName}
            class="mb-4 md:mb-6 w-auto h-12 sm:h-14 md:h-20 lg:h-28 xl:h-36 drop-shadow-lg bg-white/90 rounded-lg p-2 sm:p-2.5 md:p-3 lg:p-3.5 xl:p-4 shadow-xl"
            loading="eager"
          />
          <h1 class="text-3xl sm:text-4xl md:text-5xl lg:text-7xl font-heading font-bold drop-shadow-lg leading-hero tracking-hero">
            {displayCompanyName}
          </h1>
        </div>
        
        <!-- Hero Text - Center Right -->
        <div class="flex-1 w-full md:flex-none md:w-1/2 lg:w-2/5 text-left md:text-right mt-4 md:mt-0">
          <h2 class="text-xl sm:text-2xl md:text-4xl lg:text-5xl font-heading font-bold mb-3 md:mb-6 drop-shadow-lg leading-hero tracking-hero">
            Planning Ahead for Peace of Mind
          </h2>
          <p class="text-sm sm:text-base md:text-lg lg:text-xl text-white/95 leading-relaxed drop-shadow-md text-left md:text-right">
            Thinking about the end of life can be hard. However, making plans now is one of the best gifts you can give to your family.
          </p>
        </div>
      </div>
    </div>
    
    <!-- Attribution Footnote -->
    <div class="absolute bottom-0 right-0 z-10 px-4 sm:px-6 lg:px-8 pb-3 md:pb-4">
      <p class="text-xs sm:text-sm text-white/80 drop-shadow-md text-right">
        Provided by Arbaugh-Pearce-Greenisen & Sons
      </p>
    </div>
  </section>

  <!-- Introductory Block -->
  <section class="py-8 md:py-12 bg-white">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto">
        <div class="bg-secondary p-6 md:p-8 rounded-lg shadow-sm border-t-4 border-accent">
          <p class="text-base md:text-lg text-text leading-relaxed text-center">
            We offer comprehensive cremation and burial services. Both options are available and equally respected. Choose the service that aligns with your wishes, beliefs, and budget. All arrangements align with your family's wishes.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Service Navigation -->
  <ServiceNav />
    <!-- Cremation Options Section -->
    <section class="py-10 md:py-24 bg-secondary">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="max-w-6xl mx-auto">
          <h2 class="text-2xl md:text-4xl font-heading font-bold text-primary mb-3 md:mb-4 text-center">
            Cremation Options
          </h2>
          <p class="text-base md:text-lg text-text text-center mb-6 md:mb-8 max-w-3xl mx-auto italic">
            A modern approach to tradition, offering flexibility and personalized remembrance.
          </p>
          <p class="text-base md:text-xl text-text text-center mb-6 md:mb-12 max-w-3xl mx-auto">
            There are different ways to handle cremation. You can choose the one that fits your life and your budget.
          </p>
          <div class="grid md:grid-cols-3 gap-4 md:gap-8">
            <!-- Option 1: Direct Cremation -->
            <div class="bg-secondary p-4 md:p-8 rounded-lg shadow-sm border-t-4 border-accent">
              <div class="flex items-center gap-3 mb-3 md:mb-4">
                <svg class="w-8 h-8 md:w-10 md:h-10 text-accent flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <h3 class="text-lg md:text-2xl font-heading font-bold text-primary">
                  The Simple Option<br />
                  <span class="text-base md:text-lg font-normal">(Direct Cremation)</span>
                </h3>
              </div>
              <p class="text-sm md:text-base text-text mb-4 md:mb-6 leading-relaxed">
                This is the most basic choice. It is for people who want something simple and private.
              </p>
              <ul class="space-y-2 md:space-y-3 text-sm md:text-base text-text">
                <li class="flex items-start">
                  <span class="text-accent mr-2">•</span>
                  <span>Professional transportation and care of the deceased.</span>
                </li>
                <li class="flex items-start">
                  <span class="text-accent mr-2">•</span>
                  <span>The cremation takes place.</span>
                </li>
                <li class="flex items-start">
                  <span class="text-accent mr-2">•</span>
                  <span>There is no public funeral or visitation.</span>
                </li>
                <li class="flex items-start">
                  <span class="text-accent mr-2">•</span>
                  <span>The family receives the ashes to bury, scatter, or keep at home.</span>
                </li>
              </ul>
            </div>

            <!-- Option 2: Memorial Option -->
            <div class="bg-secondary p-4 md:p-8 rounded-lg shadow-sm border-t-4 border-accent">
              <div class="flex items-center gap-3 mb-3 md:mb-4">
                <svg class="w-8 h-8 md:w-10 md:h-10 text-accent flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                </svg>
                <h3 class="text-lg md:text-2xl font-heading font-bold text-primary">
                  The Memorial Option<br />
                  <span class="text-base md:text-lg font-normal">(Journey of Remembrance)</span>
                </h3>
              </div>
              <p class="text-sm md:text-base text-text mb-4 md:mb-6 leading-relaxed">
                This option allows friends and family to say goodbye together.
              </p>
              <ul class="space-y-2 md:space-y-3 text-sm md:text-base text-text">
                <li class="flex items-start">
                  <span class="text-accent mr-2">•</span>
                  <span>Includes a time for family and friends to visit.</span>
                </li>
                <li class="flex items-start">
                  <span class="text-accent mr-2">•</span>
                  <span>Includes a memorial service to share memories.</span>
                </li>
                <li class="flex items-start">
                  <span class="text-accent mr-2">•</span>
                  <span>The cremation happens, and the ashes are returned to the family.</span>
                </li>
              </ul>
            </div>

            <!-- Option 3: Full Service Option -->
            <div class="bg-secondary p-4 md:p-8 rounded-lg shadow-sm border-t-4 border-accent">
              <div class="flex items-center gap-3 mb-3 md:mb-4">
                <svg class="w-8 h-8 md:w-10 md:h-10 text-accent flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                </svg>
                <h3 class="text-lg md:text-2xl font-heading font-bold text-primary">
                  The Full Service Option<br />
                  <span class="text-base md:text-lg font-normal">(Journey of Life)</span>
                </h3>
              </div>
              <p class="text-sm md:text-base text-text mb-4 md:mb-6 leading-relaxed">
                This is like a traditional funeral, but it ends with cremation instead of burial.
              </p>
              <ul class="space-y-2 md:space-y-3 text-sm md:text-base text-text">
                <li class="flex items-start">
                  <span class="text-accent mr-2">•</span>
                  <span>Your body is prepared so family and friends can visit and say goodbye.</span>
                </li>
                <li class="flex items-start">
                  <span class="text-accent mr-2">•</span>
                  <span>A special "rental casket" is used for the service.</span>
                </li>
                <li class="flex items-start">
                  <span class="text-accent mr-2">•</span>
                  <span>After the funeral service is over, the cremation takes place.</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Veteran-Specific Content Section -->
    <section class="py-10 md:py-24 bg-secondary">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="max-w-4xl mx-auto">
          <h2 class="text-2xl md:text-4xl font-heading font-bold text-primary mb-6 md:mb-8 text-center">
            Veteran Services
          </h2>
          <div class="bg-white p-5 md:p-8 rounded-lg shadow-sm">
            <p class="text-sm md:text-base text-text leading-relaxed mb-6">
              We honor our veterans and their families with specialized services and benefits assistance.
            </p>
          </div>
        </div>
      </div>
    </section>


  <!-- Questions About Planning Section -->
  <section class="py-10 md:py-24 bg-white">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-2xl md:text-4xl font-heading font-bold text-primary mb-6 md:mb-8 text-center">
          Questions About Planning
        </h2>
        <div class="grid md:grid-cols-3 gap-4 md:gap-8 mb-8 md:mb-12">
          <div class="bg-white p-4 md:p-6 rounded-lg shadow-sm border-t-4 border-accent">
            <h3 class="text-lg md:text-xl font-heading font-semibold text-primary mb-3 md:mb-4">
              It Helps Your Family
            </h3>
            <p class="text-sm md:text-base text-text leading-relaxed">
              It provides clarity and peace of mind for your family by documenting your preferences in advance. Your family won't have to guess what you wanted.
            </p>
          </div>
          <div class="bg-white p-4 md:p-6 rounded-lg shadow-sm border-t-4 border-accent">
            <h3 class="text-lg md:text-xl font-heading font-semibold text-primary mb-3 md:mb-4">
              It Saves Money
            </h3>
            <p class="text-sm md:text-base text-text leading-relaxed">
              Pre-funding options to lock in today's rates. This protects your family from rising costs in the future. The money is kept safe in a special trust or insurance account until it is needed.
            </p>
          </div>
          <div class="bg-white p-4 md:p-6 rounded-lg shadow-sm border-t-4 border-accent">
            <h3 class="text-lg md:text-xl font-heading font-semibold text-primary mb-3 md:mb-4">
              It is Your Choice
            </h3>
            <p class="text-sm md:text-base text-text leading-relaxed">
              You get to decide exactly how you want to be remembered.
            </p>
          </div>
        </div>
        <div class="bg-white p-4 md:p-8 rounded-lg shadow-sm">
          <h3 class="text-xl md:text-2xl font-heading font-bold text-primary mb-6 text-center">
            Common Questions About Planning Ahead
          </h3>
          <Accordion 
            language="en"
            items={getFAQs('en', 'veteran', 'cremation')}
          />
        </div>
      </div>
    </div>
  </section>

  <OngoingCare language={isSpanish ? 'es' : 'en'} />

  <ContactForm language={isSpanish ? 'es' : 'en'} />
</Layout>
